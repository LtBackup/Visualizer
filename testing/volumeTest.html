<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test Volume Visual</title>
</head>
<body>
    
</body>
<script>
        window.onload = function() {
            var ctx = new AudioContext();
            var audio = new Audio("../testing/audio/pulse.mp3");
            audio.crossOrigin = "anonymous";
            //var audio = document.getElementById('myAudio');
            var audioSrc = ctx.createMediaElementSource(audio);
            var analyser = ctx.createAnalyser();
            // we have to connect the MediaElementSource with the analyser 
            audioSrc.connect(analyser);
            // we could configure the analyser: e.g. analyser.fftSize (for further infos read the spec)
           
            // frequencyBinCount tells you how many values you'll receive from the analyser
            var frequencyData = new Uint8Array(analyser.frequencyBinCount);
            console.log(frequencyData);
           
            // we're ready to receive some data!
            // loop
            function renderFrame() {
               requestAnimationFrame(renderFrame);
               // update data in frequencyData
               analyser.getByteFrequencyData(frequencyData);
               // render frame based on values in frequencyData
               // console.log(frequencyData)
            }
            audio.play();
            renderFrame();
          };
        </script>
</html>